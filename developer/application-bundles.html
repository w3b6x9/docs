

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Application Bundles &mdash; helloSystem experimental documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Global Menu" href="menu.html" />
    <link rel="prev" title="Applications" href="applications.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> helloSystem
          

          
            
            <img src="../_static/hello_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/getting-started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/components.html">Getting to know the system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/feedback.html">Providing feedback</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ux-guidelines.html">User Experience Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="boot.html">Boot process</a></li>
<li class="toctree-l1"><a class="reference internal" href="graphics.html">Graphics hardware autoconfiguration</a></li>
<li class="toctree-l1"><a class="reference internal" href="applications.html">Applications</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Application Bundles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#benefits">Benefits</a></li>
<li class="toctree-l2"><a class="reference internal" href="#application-bundle-formats">Application bundle formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#app-bundles"><code class="docutils literal notranslate"><span class="pre">.app</span></code> bundles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#appdir-bundles"><code class="docutils literal notranslate"><span class="pre">.AppDir</span></code> bundles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wrappers-for-legacy-packages">Wrappers for legacy packages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#getting-application-metadata-for-running-applications">Getting application metadata for running applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="#credits">Credits</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="menu.html">Global Menu</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer-tools.html">Developer Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="specifications.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="building.html">Building the Live ISO</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracing.html">Tracing with DTrace/dtruss</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributions.html">Note to distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">helloSystem</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Application Bundles</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/helloSystem/docs/blob/main/developer/application-bundles.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="application-bundles">
<h1>Application Bundles<a class="headerlink" href="#application-bundles" title="Permalink to this headline">¶</a></h1>
<p>helloSystem uses <strong>application bundles</strong> to manage native applications. Whenever possible, application bundles are used. XDG-style <code class="docutils literal notranslate"><span class="pre">.desktop</span></code> files are considered legacy and should be avoided.</p>
<div class="section" id="benefits">
<h2>Benefits<a class="headerlink" href="#benefits" title="Permalink to this headline">¶</a></h2>
<p>Applications shipped as application bundles can</p>
<ul class="simple">
<li><p>Easily be moved around in the filesystem (relocation)</p></li>
<li><p>Easily be copied to e.g., another machine or a network share</p></li>
<li><p>Easily be copied on the local machine to get a second instance of the same application (e.g., to make changes to it while keeping the original around)</p></li>
<li><p>Easily be deleted by moving to the Trash</p></li>
<li><p>Easily be managed without the need for a package manager</p></li>
<li><p>Easily be modified (e.g., changing the icon) without any side effects to other parts of the system</p></li>
<li><p>Easily be distributed (e.g., in archives like zip files or in disk images) without the need for packaging</p></li>
<li><p>Easily be understood by switchers coming from other operating systems with similar application distribution formats</p></li>
</ul>
</div>
<div class="section" id="application-bundle-formats">
<h2>Application bundle formats<a class="headerlink" href="#application-bundle-formats" title="Permalink to this headline">¶</a></h2>
<div class="section" id="app-bundles">
<h3><code class="docutils literal notranslate"><span class="pre">.app</span></code> bundles<a class="headerlink" href="#app-bundles" title="Permalink to this headline">¶</a></h3>
<p>helloSystem supports simplified GNUstep-style <code class="docutils literal notranslate"><span class="pre">.app</span></code> bundles.</p>
<p>Minimal requirements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">Application</span><span class="o">.</span><span class="n">app</span>
<span class="o">./</span><span class="n">Application</span><span class="o">.</span><span class="n">app</span><span class="o">/</span><span class="n">Application</span> <span class="o">&lt;--</span> <span class="p">(</span><span class="n">link</span> <span class="n">to</span><span class="p">)</span> <span class="n">the</span> <span class="n">executable</span> <span class="n">to</span> <span class="n">be</span> <span class="n">launched</span> <span class="n">when</span> <span class="n">Application</span><span class="o">.</span><span class="n">app</span> <span class="ow">is</span> <span class="n">double</span> <span class="n">clicked</span>
<span class="o">./</span><span class="n">Application</span><span class="o">.</span><span class="n">app</span><span class="o">/</span><span class="n">Resources</span><span class="o">/</span><span class="n">Application</span><span class="o">.</span><span class="n">png</span> <span class="o">&lt;--</span> <span class="n">the</span> <span class="n">application</span> <span class="n">icon</span> <span class="p">(</span><span class="n">png</span> <span class="nb">format</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to realize the full intended functionality, additional metadata may be required (such as localized application name, version, supported file formats, etc.). Possibly the GNUstep metadata format is sufficient for this.</p>
</div>
<div class="section" id="appdir-bundles">
<h3><code class="docutils literal notranslate"><span class="pre">.AppDir</span></code> bundles<a class="headerlink" href="#appdir-bundles" title="Permalink to this headline">¶</a></h3>
<p>helloSystem supports simplified ROX-style <code class="docutils literal notranslate"><span class="pre">.AppDir</span></code> bundles.</p>
<p>Minimal requirements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">Application</span><span class="o">.</span><span class="n">AppDir</span>
<span class="o">./</span><span class="n">Application</span><span class="o">.</span><span class="n">AppDir</span><span class="o">/</span><span class="n">AppRun</span> <span class="o">&lt;--</span> <span class="p">(</span><span class="n">link</span> <span class="n">to</span><span class="p">)</span> <span class="n">the</span> <span class="n">executable</span> <span class="n">to</span> <span class="n">be</span> <span class="n">launched</span> <span class="n">when</span> <span class="n">Application</span><span class="o">.</span><span class="n">app</span> <span class="ow">is</span> <span class="n">double</span> <span class="n">clicked</span>
<span class="o">./</span><span class="n">Application</span><span class="o">.</span><span class="n">AppDir</span><span class="o">/.</span><span class="n">DirIcon</span> <span class="o">&lt;--</span> <span class="n">the</span> <span class="n">application</span> <span class="n">icon</span> <span class="p">(</span><span class="n">png</span> <span class="nb">format</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to realize the full intended functionality, additional metadata may be required (such as localized application name, version, supported file formats, etc.). Possibly the ROX AppDir specification is not sufficient for this and may need to be amended (to be determined).</p>
</div>
<div class="section" id="wrappers-for-legacy-packages">
<h3>Wrappers for legacy packages<a class="headerlink" href="#wrappers-for-legacy-packages" title="Permalink to this headline">¶</a></h3>
<p>helloSystem supports applications that are not shipped in bundle formats yet. These can be bridged by <strong>wrapper bundles</strong>, application bundles that merely launch (but do not contain) the payload application (which may be installed in traditional ways).</p>
<p>A <strong>desktop2app</strong> tool ships with helloSystem that automates the creation of such wrappers.</p>
<p>Please note that the use of wrapper bundles is discouraged and is only available as a bridge technology for backward compatibility with existing application packages.</p>
</div>
</div>
<div class="section" id="getting-application-metadata-for-running-applications">
<h2>Getting application metadata for running applications<a class="headerlink" href="#getting-application-metadata-for-running-applications" title="Permalink to this headline">¶</a></h2>
<p>Many desktop environments use XDG-style <code class="docutils literal notranslate"><span class="pre">.desktop</span></code> files to figure out which application a given window belongs to but since helloSystem is using <code class="docutils literal notranslate"><span class="pre">.app</span></code> bundles and <code class="docutils literal notranslate"><span class="pre">.AppDir</span></code> application directories this approach is not sufficient since such applications normally do not install XDG-style <code class="docutils literal notranslate"><span class="pre">.desktop</span></code> files in central locations.</p>
<p>Docks (and other similar applciations) can find the icon that belongs to a window on the screen by the following procedure:</p>
<ol class="simple">
<li><p>Get the Window IDs of the windows on the screen from Xorg (to simulate this, you can use the <code class="docutils literal notranslate"><span class="pre">xprop</span></code> tool)</p></li>
<li><p>Get the process ID (PID) that has launched the window with this ID from the <code class="docutils literal notranslate"><span class="pre">_NET_WM_PID</span></code> property of the Xorg window</p></li>
<li><p>Get the path of the executable and its arguments that launched this PID from the operating system, e.g., using <code class="docutils literal notranslate"><span class="pre">/proc/$PID/cmdline</span></code> (Linux) or the <code class="docutils literal notranslate"><span class="pre">procstat</span></code> command (FreeBSD)</p></li>
<li><p>From the path and the arguments figure out which element might be the relevant <code class="docutils literal notranslate"><span class="pre">.app</span></code> bundle or <code class="docutils literal notranslate"><span class="pre">.AppDir</span></code>. For example, a process might have been invoked with <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-E</span> <span class="pre">launch</span> <span class="pre">python3</span> <span class="pre">/Applications/Some.app/Some</span> <span class="pre">--arguments</span> <span class="pre">123</span></code>. In this case the relevant information is in a “random” location within the long list of arguments. Also consider the case <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">/Applications/Some.app/Resources/some-executable</span></code>. In this case <code class="docutils literal notranslate"><span class="pre">some-executable</span></code> is in a subdirectory of the application bundle</p></li>
</ol>
<p>A rudimentary implementation of this logic is in place in Dock in the <code class="docutils literal notranslate"><span class="pre">Utils::readInfoFromPid(quint32</span> <span class="pre">pid)</span></code> and <code class="docutils literal notranslate"><span class="pre">Utils::examinePotentialBundlePath(QString</span> <span class="pre">path)</span></code> methods, but improvements are highly welcome.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To display the correct icons in Dock for processes running as root, users must be able to see information on processes running as root. Hence security.bsd.see_other_uids=0 must not be set in sysctl.conf for this to work.</p>
</div>
</div>
<div class="section" id="credits">
<h2>Credits<a class="headerlink" href="#credits" title="Permalink to this headline">¶</a></h2>
<p>Application directories and applciation bundles have been used by many desktop-oriented operating systems, including RISC OS, NeXTStep/OPENSTEP, Mac OS X, and various other systems. Classic Macintosh System used single-file applications that kept resources in the Resource Fork.</p>
<ul class="simple">
<li><p>https://en.wikipedia.org/wiki/Application_directory</p></li>
<li><p>http://rox.sourceforge.net/desktop/AppDirs.html</p></li>
<li><p>https://en.wikipedia.org/wiki/Resource_fork</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="menu.html" class="btn btn-neutral float-right" title="Global Menu" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="applications.html" class="btn btn-neutral float-left" title="Applications" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>